# API Documentation

This folder contains the OpenAPI specification for the backend API.

- `openapi.json` is auto-generated by `tools/generate-openapi.js`.
- To regenerate the spec:

```bash
cd cguard-backend
npm run generate:openapi
```

- To serve the documentation in development, start the backend with the environment variable `API_DOCUMENTATION_ENABLED=true` and visit `/documentation`.

- To annotate a handler with richer OpenAPI information, add a JSDoc block containing `@openapi` followed by a JSON object. Example in `src/api/user/userCreate.ts`:

```ts
/**
 * @openapi {
 *   "summary": "Create a user",
 *   "description": "Creates a new user in the tenant.",
 *   "requestBody": {
 *     "content": {
 *       "application/json": {
 *         "schema": { "type": "object" }
 *       }
 *     }
 *   },
 *   "responses": { "200": { "description": "OK" } }
 * }
 */
export default async (req, res) => { ... }
```

The generator will parse this JSON and merge it into the generated `openapi.json`.
